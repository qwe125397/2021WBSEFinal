<?xml version = "1.0" encoding = "utf-8"?>
<html>
<head>
<meta charset="utf-8">
<title>Article</title>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
	function createArticle() {
		$('#maskTable01').show();
		$('#menu01').empty();
		let requestURL = "newArticle" + $("#createpharmacyId").val() +"/note";
		let article = $("#authorId").val() + $("#articleId").val() + $("#articleName").val() + $("#postTime").val() + $("#articContent").val();

		$.ajax({ // Use Ajax to POST data
			url : requestURL,
			data : article,
			type : "POST",
			dataType : "json",
			contentType : "application/text;charset=utf-8",
			success : function(returnData) {
				var content = "<tr>" + "<td>" + returnData.id + "</td>"
				+ "<td>" + returnData.authorId + "</td>"
				+ "<td>" + returnData.articleId + "</td>"
				+ "<td>" + returnData.articleName + "</td>"
				+ "<td>" + returnData.postTime + "</td>"
				+ "<td>" + returnData.articContent + "</td>"
				+ "</tr>";
				
				$("#menu01").append(content);
			},
			error : function(xhr, ajaxOptions, thrownError) {
				console.log(xhr.status);
				console.log(thrownError);
			}
		});
	}
	
	function replaceArticle() {
		$('#maskTable02').show();
		$('#menu02').empty();
		let requestURL = "editArticle" ;
		let article = $("#authorId").val() + $("#articleId").val() + $("#articleName").val() + $("#postTime").val() + $("#articContent").val();

		$.ajax({ // Use Ajax to POST data
			url : requestURL,
			data : article,
			type : "PUT",
			dataType : "json",
			contentType : "application/text;charset=utf-8",
			success : function(returnData) {
				var content = "<tr>" + "<td>" + returnData.id + "</td>"
				+ "<td>" + returnData.authorId + "</td>"
				+ "<td>" + returnData.articleId + "</td>"
				+ "<td>" + returnData.articleName + "</td>"
				+ "<td>" + returnData.postTime + "</td>"
				+ "<td>" + returnData.articContent + "</td>"
				+ "</tr>";
				
				$("#menu02").append(content);
			},
			error : function(xhr, ajaxOptions, thrownError) {
				console.log(xhr.status);
				console.log(thrownError);
			}
		});
	}
	
	function deleteArticle() {
		let requestURL = "deleteArticle";

		$.ajax({ // Use Ajax to POST data
			url : requestURL,
			type : "DELETE",
			success : function(returnData) {
				window.alert("Success Deleted!");
			},
			error : function(xhr, ajaxOptions, thrownError) {
				console.log(xhr.status);
				console.log(thrownError);
			}
		});
	}
</script>
</head>

<body>
	<fieldset>
		<legend>新增文章</legend>
		<form action="#">
			<p>
				作者id: <input type="text" id="authorId" />
			</p>
			<p>
				文章id: <input type="text" id="articleId" />
			</p>
			<p>
				文章名稱: <input type="text" id="articleName" />
			</p>
			<p>
				發表時間: <input type="text" id="postTime" />
			</p>
			<p>
				文章內容: <input type="text" id="articContent" />
			</p>
			<input type="button" value="新增" onclick="createArticle()" />
		</form>
		<table border="1" id='maskTable01' style='width: 100%; display: none'>
			<thead>
				<tr>
					<th>作者ID</th>
					<th>文章ID</th>
					<th>文章名稱</th>
					<th>發表時間</th>
					<th>文章內容</th>
				</tr>
			</thead>
			<tbody id="menu01">
				
			</tbody>
		</table>
	</fieldset>
	<fieldset>
		<legend>修改文章</legend>
		<form action="#">
			<p>
				藥局ID: <input type="text" id="replacepharmacyId" />
			</p>
			<p>
				修改備註: <input type="text" id="replacenote" />
			</p>
			<input type="button" value="修改" onclick="replaceArticle()" />
		</form>
		<table border="1" id='maskTable02' style='width: 100%; display: none'>
			<thead>
				<tr>
					<th>作者ID</th>
					<th>文章ID</th>
					<th>文章名稱</th>
					<th>發表時間</th>
					<th>文章內容</th>
				</tr>
			</thead>
			<tbody id="menu02">
				
			</tbody>
		</table>
	</fieldset>
	<fieldset>
		<legend>刪除文章</legend>
		<form action="#">
			<p>
				藥局ID: <input type="text" id="deletepharmacyId" />
			</p>
			<input type="button" value="刪除" onclick="deleteArticle()" />
		</form>
	</fieldset>
</body>

</html>